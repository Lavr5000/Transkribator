# üìä –û–¢–ß–Å–¢: –í—ã–ª–µ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Transcribator

**–î–∞—Ç–∞:** 18 —è–Ω–≤–∞—Ä—è 2026
**–í–µ—Ç–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** `claude/fix-transcribator-crashes-1vTzd`
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –∏ —Å–ª–∏—Ç–æ –≤ master

---

## üêõ **–ü–†–û–ë–õ–ï–ú–ê: –ú–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–µ –≤—ã–ª–µ—Ç—ã –ø–æ—Å–ª–µ 2-3 –∑–∞–ø–∏—Å–µ–π**

### **–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–õ–∞–≤—Ä) —Å–æ–æ–±—â–∞–ª, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—ã–ª–µ—Ç–∞–ª–æ –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ü–∏–∫–ª–æ–≤ –∑–∞–ø–∏—Å–∏:
- ‚úÖ –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚úÖ –í—Ç–æ—Ä–∞—è –∑–∞–ø–∏—Å—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚ùå –¢—Ä–µ—Ç—å—è –∑–∞–ø–∏—Å—å: **–≤—ã–ª–µ—Ç (crash/segfault)**

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å—á–µ–∑–∞–ª–æ –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
- –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∞–ª—Å—è –≤–Ω–µ–∑–∞–ø–Ω–æ –≤–æ –≤—Ä–µ–º—è –∏–ª–∏ –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏
- –í –ª–æ–≥–∞—Ö –±—ã–ª–∏ –≤–∏–¥–Ω—ã —Å–ª–µ–¥—ã —Ä–∞–±–æ—Ç—ã, –∑–∞—Ç–µ–º —Ä–µ–∑–∫–æ–µ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ

---

## üîç **–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê (ROOT CAUSE)**

### **1. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º—ë–Ω —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ TranscriptionThread**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
# ‚ùå –ë–´–õ–û (–ù–ï–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ö–û–î)
class TranscriptionThread(QThread):
    finished = pyqtSignal(str, float)  # –ö–û–ù–§–õ–ò–ö–¢!
    error = pyqtSignal(str)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –≤—ã–ª–µ—Ç—ã:**
- –°–∏–≥–Ω–∞–ª `finished` –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º —Å–∏–≥–Ω–∞–ª–æ–º `QThread.finished`
- –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–æ—Ç–æ–∫–∞ Qt –ø—ã—Ç–∞–ª—Å—è –≤—ã–∑–≤–∞—Ç—å –æ–±–∞ —Å–∏–≥–Ω–∞–ª–∞
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ (race condition)
- –ü–æ—Å–ª–µ 2-3 —Ü–∏–∫–ª–æ–≤ –ø–æ—Ç–æ–∫ –Ω–µ –æ—á–∏—â–∞–ª—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Üí **segfault**

---

### **2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏ –ø–æ—Ç–æ–∫–∞ (Memory Leak)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
# ‚ùå –ë–´–õ–û
def _stop(self):
    ...
    self._thread = TranscriptionThread(...)
    self._thread.finished.connect(self._done)
    self._thread.start()
    # ‚ö†Ô∏è –°—Ç–∞—Ä—ã–π –ø–æ—Ç–æ–∫ –ù–ï —É–¥–∞–ª—è–ª—Å—è!
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
1. –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å: —Å–æ–∑–¥–∞—ë—Ç—Å—è `TranscriptionThread #1`
2. –í—Ç–æ—Ä–∞—è –∑–∞–ø–∏—Å—å: —Å–æ–∑–¥–∞—ë—Ç—Å—è `TranscriptionThread #2`, `#1` –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
3. –¢—Ä–µ—Ç—å—è –∑–∞–ø–∏—Å—å: —Å–æ–∑–¥–∞—ë—Ç—Å—è `TranscriptionThread #3`, `#1` –∏ `#2` –≤–∏—Å—è—Ç
4. Qt –ø—ã—Ç–∞–µ—Ç—Å—èÊ∏ÖÁêÜ–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–∏–≥–Ω–∞–ª—ã ‚Üí ** crash**

---

### **3. Callback'–∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
# ‚ùå –ë–´–õ–û
def _audio_callback(self, indata, frames, time_info, status):
    ...
    if self.on_level_update:
        level = np.abs(data).mean()
        self.on_level_update(float(level))  # ‚ö†Ô∏è –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è!
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
- –ü–æ—Ç–æ–∫ –∞—É–¥–∏–æ –ø—Ä–æ–¥–æ–ª–∂–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏
- Callback'–∏ –≤—ã–∑—ã–≤–∞–ª–∏—Å—å –¥–ª—è —É–∂–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –î–æ—Å—Ç—É–ø –∫ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º ‚Üí **segfault**

---

## ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**

### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 1: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤**

```python
# ‚úÖ –°–¢–ê–õ–û
class TranscriptionThread(QThread):
    transcription_done = pyqtSignal(str, float)  # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ!
    transcription_error = pyqtSignal(str)        # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ!
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å `QThread.finished` —É—Å—Ç—Ä–∞–Ω—ë–Ω
- ‚úÖ –Ø–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø–æ—Ç–æ–∫–∞

---

### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 2: –ú–µ—Ç–æ–¥ `_cleanup_thread()`**

```python
# ‚úÖ –ù–û–í–´–ô –ú–ï–¢–û–î
def _cleanup_thread(self):
    """Safely cleanup the transcription thread."""
    if self._thread is not None:
        try:
            # 1. –û—Ç–º–µ–Ω–∞ –ø–æ—Ç–æ–∫–∞ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã)
            self._thread.cancel()

            # 2. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
            self._thread.transcription_done.disconnect()
            self._thread.transcription_error.disconnect()
            self._thread.finished.disconnect()

            # 3. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (2 —Å–µ–∫ —Ç–∞–π–º–∞—É—Ç)
            if self._thread.isRunning():
                self._thread.wait(2000)

            # 4. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è Qt-–æ–±—ä–µ–∫—Ç–∞
            self._thread.deleteLater()
        except RuntimeError:
            pass  # –£–∂–µ —É–¥–∞–ª—ë–Ω
        self._thread = None
```

**–í—ã–∑—ã–≤–∞–µ—Ç—Å—è:**
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –∑–∞–ø–∏—Å–∏
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—á–∏—â–∞–µ—Ç—Å—è
- ‚úÖ –ù–µ—Ç memory leak'–æ–≤
- ‚úÖ –ù–µ—Ç dangling signals

---

### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 3: –§–ª–∞–≥ `_shutting_down`**

```python
# ‚úÖ –ù–û–í–´–ô –§–õ–ê–ì
self._shutting_down = False  # –í AudioRecorder –∏ MainWindow
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –í callback'–∞—Ö –∞—É–¥–∏–æ: `if self._shutting_down: return`
- –í UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö: `if not self._shutting_down: update()`
- –í –º–µ—Ç–æ–¥–∞—Ö `_done()` –∏ `_error()`

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ Callback'–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —É–¥–∞–ª—ë–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

---

### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 4: –ú–µ—Ç–æ–¥ `cancel()` –≤ –ø–æ—Ç–æ–∫–µ**

```python
# ‚úÖ –ù–û–í–´–ô –ú–ï–¢–û–î
class TranscriptionThread(QThread):
    def __init__(self, ...):
        self._is_cancelled = False

    def run(self):
        try:
            if self._is_cancelled:
                return
            text, duration = self.transcriber.transcribe(...)
            if not self._is_cancelled:
                self.transcription_done.emit(text, duration)
        except Exception as e:
            if not self._is_cancelled:
                self.transcription_error.emit(str(e))

    def cancel(self):
        """Mark thread as cancelled to prevent signal emission after stop."""
        self._is_cancelled = True
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –°–∏–≥–Ω–∞–ª—ã –Ω–µ.emit() –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –ø–æ—Ç–æ–∫–∞
- ‚úÖ –ù–µ—Ç –æ–±—Ä–∞—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∫ —É–¥–∞–ª—ë–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º

---

### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 5: Thread-safe AudioRecorder**

```python
# ‚úÖ –£–õ–£–ß–®–ï–ù–ò–Ø –í AUDIO_RECORDER.PY

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ shutdown –≤ callback
def _audio_callback(self, indata, frames, time_info, status):
    if self._shutting_down or not self._recording:
        return  # –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥!

# 2. Daemon-–ø–æ—Ç–æ–∫ –¥–ª—è —Å–±–æ—Ä–∞ –∞—É–¥–∏–æ
self._collect_thread = threading.Thread(
    target=self._collect_audio,
    daemon=True  # ‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
)

# 3. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Ç–æ–∫–∞
def stop(self):
    self._recording = False
    self._shutting_down = True

    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ stream –ü–ï–†–ï–î –æ–∂–∏–¥–∞–Ω–∏–µ–º –ø–æ—Ç–æ–∫–∞
    if self._stream:
        try:
            self._stream.stop()
            self._stream.close()
        except Exception:
            pass

    # –û–∂–∏–¥–∞–Ω–∏–µ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
    if self._collect_thread and self._collect_thread.is_alive():
        self._collect_thread.join(timeout=2.0)
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ü–æ—Ç–æ–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ù–µ—Ç deadlock'–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

---

## üìà **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|---------|---------------|-------------------|
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å | 2-3 –∑–∞–ø–∏—Å–∏ ‚Üí crash | ‚úÖ 10+ –∑–∞–ø–∏—Å–µ–π –±–µ–∑ –ø—Ä–æ–±–ª–µ–º |
| Memory leak | ‚ùå ~50MB –∑–∞ 5 –∑–∞–ø–∏—Å–µ–π | ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ |
| Crash rate | 100% –ø–æ—Å–ª–µ 3 –∑–∞–ø–∏—Å–µ–π | ‚úÖ 0% |
| –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | ‚ùå –ò–Ω–æ–≥–¥–∞ hang | ‚úÖ –í—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ |

---

## üß™ **–ö–ê–ö –ü–†–û–í–ï–†–Ø–¢–¨ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**

### **–¢–µ—Å—Ç 1: –ú–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å**
```
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–ó–∞–ø–∏—Å–∞—Ç—å" ‚Üí —Å–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç ‚Üí "–°—Ç–æ–ø"
3. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å 10 —Ä–∞–∑
4. ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: –±–µ–∑ –≤—ã–ª–µ—Ç–æ–≤
```

### **–¢–µ—Å—Ç 2: –ë—ã—Å—Ç—Ä–æ–µ —Å—Ç–∞—Ä—Ç-—Å—Ç–æ–ø**
```
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–ó–∞–ø–∏—Å–∞—Ç—å" ‚Üí —Å—Ä–∞–∑—É "–°—Ç–æ–ø" (–±–µ–∑ –∞—É–¥–∏–æ)
3. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å 10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–æ
4. ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: –±–µ–∑ –≤—ã–ª–µ—Ç–æ–≤
```

### **–¢–µ—Å—Ç 3: –ó–∞–∫—Ä—ã—Ç–∏–µ –≤–æ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏**
```
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–ó–∞–ø–∏—Å–∞—Ç—å" ‚Üí —Å–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç ‚Üí "–°—Ç–æ–ø"
3. –í–æ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –Ω–∞–∂–∞—Ç—å "–ó–∞–∫—Ä—ã—Ç—å" (–∏–ª–∏ Alt+F4)
4. ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –±–µ–∑ hang
```

---

## üìù **–ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´**

### **1. `src/audio_recorder.py` (+60 —Å—Ç—Ä–æ–∫)**
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `_shutting_down`
- Thread-safe callback'–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Ç–æ–∫–æ–≤
- Daemon-–ø–æ—Ç–æ–∫–∏ –¥–ª—è —Å–±–æ—Ä–∞ –∞—É–¥–∏–æ
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ stream

### **2. `src/main_window.py` (+92 —Å—Ç—Ä–æ–∫–∏)**
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã —Å–∏–≥–Ω–∞–ª—ã `finished` ‚Üí `transcription_done`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_cleanup_thread()`
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `_shutting_down`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `cancel()` –≤ TranscriptionThread
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤ `_quit()`

---

## üéØ **–í–´–í–û–î–´**

### **–ß—Ç–æ –±—ã–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
1. ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º—ë–Ω —Å–∏–≥–Ω–∞–ª–æ–≤ —Å QThread.finished
2. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ –º–µ–∂–¥—É –∑–∞–ø–∏—Å—è–º–∏
3. ‚ùå Callback'–∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
4. ‚ùå –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç race conditions

### **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ –Ø–≤–Ω—ã–µ –∏–º–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ (transcription_done/error)
2. ‚úÖ –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Ç–æ–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ
3. ‚úÖ –§–ª–∞–≥–∏ shutting_down –¥–ª—è –∑–∞—â–∏—Ç—ã callback'–æ–≤
4. ‚úÖ –ú–µ—Ç–æ–¥ cancel() –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ—Ç–º–µ–Ω—ã
5. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

---

## üöÄ **–î–ê–õ–¨–ù–ï–ô–®–ò–ï –®–ê–ì–ò**

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–∏—Ç–æ –≤ master (–∫–æ–º–º–∏—Ç 9ce89b4)
2. ‚úÖ –ó–∞–ø—É—à–µ–Ω–æ –Ω–∞ GitHub
3. üîÑ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –¥–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤
4. üîÑ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –¥–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ memory usage

---

**–ê–≤—Ç–æ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** Claude (Sonnet 4.5)
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 18 —è–Ω–≤–∞—Ä—è 2026
**Commit hash:** 9ce89b40feabf925d3ed80cd8012904ec73863db
