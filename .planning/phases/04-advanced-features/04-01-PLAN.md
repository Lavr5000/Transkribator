---
wave: 1
depends_on: []
files_modified:
  - src/config.py
  - src/main_window.py
  - src/transcriber.py
autonomous: true
must_haves:
  - quality_profile setting added to Config with default "balanced"
  - apply_quality_profile() method implements Fast/Balanced/Quality presets
  - UI has radio card selection for quality profiles in Settings dialog
  - Profile changes update all related settings (backend, model, VAD, post-processing)
  - Config migration handles missing quality_profile key
---

# Plan 04-01: Quality Profiles

**Objective:** Add quality profile presets (Fast/Balanced/Quality) to simplify configuration

## Tasks

<tasks>
<task id="04-01-01">
<summary>Add quality_profile field to Config dataclass</summary>
<details>
- Add `quality_profile: str = "balanced"` to Config in src/config.py
- Add QUALITY_PROFILES dictionary with profile definitions
- Implement `apply_quality_profile(self, profile: str) -> None` method
- Profile presets:
  * fast: sherpa + giga-am-v2-ru + VAD off + min post-processing
  * balanced: sherpa + giga-am-v2-ru + VAD medium (0.5) + standard post-processing
  * quality: whisper + small + VAD aggressive (0.3) + max post-processing
</details>
<verification>Config.quality_profile defaults to "balanced"; apply_quality_profile() sets all parameters</verification>
</task>

<task id="04-01-02">
<summary>Create quality profile UI in SettingsDialog</summary>
<details>
- Add new QGroupBox "Quality Profile" to settings tab
- Create 3 radio card buttons (QRadioButton + custom styling)
- Layout: horizontal card layout with icons and descriptions
- Cards: "‚ö° Fast", "‚öñÔ∏è Balanced", "üéØ Quality"
- Add descriptive labels under each card (model, RTF estimate)
- Connect radio button toggled signal to _on_quality_profile_changed()
</details>
<verification>Three radio cards visible; selecting one updates config.quality_profile</verification>
</task>

<task id="04-01-03">
<summary>Implement profile change handler in MainWindow</summary>
<details>
- Add `_on_quality_profile_changed(profile: str)` method in MainWindow
- Call `config.apply_quality_profile(profile)` on change
- Update transcriber parameters:
  * Call `transcriber.switch_backend()` if backend changed
  * Update VAD settings (vad_enabled, vad_threshold)
  * Update enable_post_processing flag
- Save config after applying profile
- Update UI controls to reflect new values
</details>
<verification>Changing profile updates backend, VAD, and post-processing settings</verification>
</task>

<task id="04-01-04">
<summary>Update config loading for backward compatibility</summary>
<details>
- Modify Config.load() to handle missing quality_profile key
- Add migration logic for old config files
- Default to "balanced" if key not present
- Test loading old config file (without quality_profile)
</details>
<verification>Old config files load successfully and default to "balanced"</verification>
</task>

<task id="04-01-05">
<summary>Add visual feedback for profile changes</summary>
<details>
- Highlight selected profile card with accent color
- Add checkmark (‚úì) to selected card
- Add brief description of what each profile optimizes
- Apply DIALOG_STYLESHEET styling to cards
- Add "Reset to Balanced" button
</details>
<verification>Selected card has visual accent; descriptions are clear</verification>
</task>
</tasks>

## Success Criteria

- [ ] User can select Fast/Balanced/Quality from settings
- [ ] Selecting a profile updates backend, model, VAD, and post-processing
- [ ] Config persists quality_profile selection
- [ ] Old configs without quality_profile default to "balanced"
- [ ] UI clearly shows current profile selection

## Notes

- Quality profiles are presets; user can manually override individual settings after selection
- Profile changes don't require restart (except model loading takes time)
- Consider adding "Custom" profile if user deviates from presets (future enhancement)
