---
wave: 2
depends_on: []
files_modified:
  - src/main_window.py
autonomous: true
must_haves:
  - VAD Threshold slider (0.0-1.0) with numeric display
  - Min Silence Duration slider (100-3000ms) with numeric display
  - Sliders update config.vad_threshold and config.min_silence_duration_ms
  - Settings persist immediately on slider change
  - Transcriber VAD parameters update in real-time
---

# Plan 04-03: VAD Settings in UI

**Objective:** Expose VAD (Voice Activity Detection) settings in the UI for fine-tuning

## Tasks

<tasks>
<task id="04-03-01">
<summary>Create VAD Settings group in SettingsDialog</summary>
<details>
- Add QGroupBox "Voice Detection" to settings tab
- Place after Behavior group, before Mouse group
- Use QVBoxLayout for the group
</details>
<verification>VAD Settings group appears in settings tab</verification>
</task>

<task id="04-03-02">
<summary>Add VAD Threshold slider</summary>
<details>
- Create horizontal layout for threshold control
- Add QLabel "VAD Threshold:"
- Add QSlider with range 0-100 (maps to 0.0-1.0)
- Add QLabel for numeric value (e.g., "0.50")
- Add position labels: "Silent" (0.3) ← "Medium" (0.5) → "Sensitive" (0.7)
- Apply DIALOG_STYLESHEET styling
</details>
<verification>Slider moves from 0 to 100; label shows decimal value</verification>
</task>

<task id="04-03-03">
<summary>Add Min Silence Duration slider</summary>
<details>
- Create horizontal layout for silence duration control
- Add QLabel "Min Silence:"
- Add QSlider with range 100-3000 (milliseconds)
- Add QLabel for numeric value with "ms" suffix (e.g., "800ms")
- Add position labels: "Short" (500ms) ← "Medium" (1000ms) → "Long" (2000ms)
- Style consistently with threshold slider
</details>
<verification>Slider shows values from 100 to 3000ms</verification>
</task>

<task id="04-03-04">
<summary>Add "Reset to Defaults" button for VAD</summary>
<details>
- Create QPushButton "Reset VAD Defaults"
- Reset to: threshold=0.5, min_silence=800ms
- Update sliders and labels on reset
- Save config on reset
</details>
<verification>Button restores VAD settings to default values</verification>
</task>

<task id="04-03-05">
<summary>Implement slider change handlers</summary>
<details>
- Add _vad_threshold_changed(int_value) method
  * Convert to float: int_value / 100.0
  * Update config.vad_threshold
  * Update numeric label
  * Call config.save()
  * Update transcriber.vad_threshold
- Add _min_silence_changed(int_value) method
  * Update config.min_silence_duration_ms
  * Update numeric label
  * Call config.save()
  * Update transcriber.min_silence_duration_ms
</details>
<verification>Slider changes update config and transcriber immediately</verification>
</task>

<task id="04-03-06">
<summary>Initialize sliders from config values</summary>
<details>
- In SettingsDialog.__init__:
  * Set threshold slider to config.vad_threshold * 100
  * Set silence slider to config.min_silence_duration_ms
  * Update numeric labels
- Connect sliders to handlers after initialization
</details>
<verification>Sliders show current config values on dialog open</verification>
</task>
</tasks>

## Success Criteria

- [ ] VAD Threshold slider accessible in settings
- [ ] Min Silence Duration slider accessible in settings
- [ ] Slider changes take effect immediately
- [ ] Config saves automatically on slider change
- [ ] Reset button restores defaults

## UI Layout

```
┌─ Voice Detection ──────────────────────┐
│ VAD Threshold    [━━━●━━] 0.50         │
│ (Silent ←→ Sensitive)                 │
│                                         │
│ Min Silence      [━━━●━━] 800ms        │
│ (Short ←→ Long)                        │
│                                         │
│ [Reset to Defaults]                    │
└─────────────────────────────────────────┘
```

## Notes

- VAD changes don't require restart
- Lower threshold = more sensitive speech detection
- Longer min silence = longer pauses before cutting
- Consider adding tooltips explaining each setting
